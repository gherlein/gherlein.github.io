<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.74.3" />

  <title>Cloudy DevOps - Part 1 &middot; Greg Herlein</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://gherlein.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://gherlein.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://gherlein.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://gherlein.github.io/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://gherlein.github.io/">Herlein</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://gherlein.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://gherlein.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://gherlein.github.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://gherlein.github.io/projects/"><i class='fa fa-user fa-fw'></i>Projects</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://gherlein.github.io/resume/"><i class='fa fa-user fa-fw'></i>Resume</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/gherlein" rel="me" target="_blank"><i class="fab fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/gherlein" rel="me" target="_blank"><i class="fab fa-linkedin"></i></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/gherlein" rel="me" target="_blank"><i class="fab fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://keybase.io/gherlein" rel="me" target="_blank"><i class="fas fa-key"></i>Keybase</a>
    </li>
    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2018-2020. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Cloudy DevOps - Part 1</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>10 Feb 2019, 14:50</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://gherlein.github.io/tags/technical">technical</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://gherlein.github.io/tags/devops">devops</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://gherlein.github.io/tags/cloud">cloud</a>
    
  </div>
  
  

</div>

  <p>What exactly is Cloudy DevOps?  How do you go from classic data center Enterprise deployments to the cloud?  Here&rsquo;s some of what I&rsquo;ve learned across a half-dozen teams who&rsquo;ve done it.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/what-is-cloud.png" width="100%" /></p>

<p>So you have read my blog post about <a href="https://www.linkedin.com/pulse/how-do-devops-greg-herlein/">How To Do DevOps</a>. You agree with the principles of aligning the goals of Dev and Ops, have those two teams work together every day, and treating Ops as a software problem.  Great principles.  But tactically speaking, what do you do to move towards DevOps in the cloud?</p>

<h2 id="it-s-all-about-maturing">It&rsquo;s All About Maturing</h2>

<p>So you have a monolithic, Enterprise application.  It&rsquo;s hosted in your data center.  You want to move to the cloud.  You want to deploy new features faster.  You want to scale up and down with your business without spending huge sums of capital up front.  You want even higher availability without paying many multiples more than you are now.  You want Cloudy DevOps.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/maturation.png" width="100%" /></p>

<p>Everyone has to start somewhere.  DevOps is iterative, and it&rsquo;s best done in small steps.  You might be lucky enough to be doing a brand-new startup or a green field project and can start &ldquo;right&rdquo; but probably not.  Most likely you are where you are and you want to &ldquo;get better.&rdquo;  That&rsquo;s the norm.  It&rsquo;s like a catapillar becoming a butterfly:  it&rsquo;s all about the maturation process.</p>

<p>You may or may not be doing things in an agile way yet.  But that&rsquo;s really the place to start.  The whole approach to getting from where you are to where you want to be is an agile one.  Pick scrum, or kanban or some merger of the two (scrumban) but head in that direction.  If you are really serious, do it right.  Scrum does not work unless you really track your delivered story points to know what your capacity is - and then actually use that to estimate time to feature delivery.  If you revert to just pushing teams to deliver against a schedule that you mandate&hellip; then you are not doing scrum.  Likewise, if you are kanban then you need to actually measure your &ldquo;work in progress limit&rdquo; (WIP limit) and honor it.  You will need to add some form of either breaking work into similar sized chunks or using a story point approach if you want to predict when things will be done.  Setting a schedule for when you will deliver a finished software and not tracking team &ldquo;feature velocity&rdquo; is not agile.  If you want to do cloud DevOps, fix your agile story first.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/agile.jpg" width="100%" /></p>

<p>The funny thing is that moving to agile gets easier as you break your system down into micro-services and take a cloud-native approach.  The more you decouple things the more you can iterate on the parts independently. The more you can make changes independently the easier it gets moving forward.  How do you move a giant mountain of dirt?  One shovel at a time.</p>

<p>The same approach makes sense as you move towards DevOps. It&rsquo;s a process.  Do a little bit, then do a little bit more. Get better each time.</p>

<h3 id="the-cloud-journey">The Cloud Journey</h3>

<p>The first step into cloud for most teams is the infamous &ldquo;lift and shift&rdquo; of existing software onto VM&rsquo;s in some form of cloud.  It may be in your own datacenters on VMWare VM&rsquo;s even, but that&rsquo;s a start.  It moves you in the direction of virtualization.  This is a good thing, but it&rsquo;s only the first baby step towards cloud.  Don&rsquo;t get me wrong, it&rsquo;s still a useful step.  Many programs who want to go to the cloud and a lift and shift is the only way they can realistically get started.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/cloud1.png" width="100%" /></p>

<p>I call this Cloud 1.0.  If you are using a public cloud you accomplish a huge business value of moving your infrastructure from a CapEx problem to an OpEx problem.  You don&rsquo;t have to long-range capital planning for datacenter expansion because you can assume the cloud provider has virtually infinite capacity.  You do have to plan, since your finance folks will want to project costs, of course.  But it&rsquo;s an operating expense now (OpEx) which essentially comes out of a different budget - one that in my experience is a lot easier to get.  Large capital expenditures seem to always involve a lot more planning and approval.  Once you lift and shift onto a cloud platform you can incrementally scale your solution and you are at least in the right environment.  But Cloud 1.0 is really just the beginning.</p>

<p>Cloud 2.0 is when you really start to embrace changes that will resonate into how to actually develop and deliver software.  This is perhaps the biggest change you will face because it&rsquo;s a departure from everything you are used to. And that&rsquo;s a bit deal.  You may not have the skills you need.  My experience is that some Dev teams know only development.  This is much more common in java shops it seems.  The things I am about to discuss definitely require linux skills.  If your teams don&rsquo;t have those skills, you may need some training.  Don&rsquo;t discount this.  Lack of linux skills definitely slowed down several DevOps efforts I&rsquo;ve been a part of.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/skills-training.jpg" width="100%" /></p>

<h3 id="real-cloud-makes-everything-different-no-really">Real Cloud Makes Everything Different - No REALLY</h3>

<p>That&rsquo;s worth saying again.  Cloud 2.0 is DIFFERENT.  There are two reasons underlying this but they have far reaching implications on your processes.</p>

<p>The obvious first change is &ldquo;infrastructure as code.&rdquo;  This can really be any tool you want, really, if it translates to the creation of some combination of networking, compute, and storage that is created from running code.  This can be terraform, ansible, chef, salt, puppet, python using bodo, or whatever.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/infra-as-code.png" width="100%" /></p>

<p>Now there&rsquo;s a hidden secret here.  The ASSUMPTION is that if you have &ldquo;infra as code&rdquo; that you also have deployment automation.  That may include the same tools, or not.  For really simple things you may bake the whole application onto VM images.  I don&rsquo;t recommend that for anything non-trivial because it quickly becomes hell to manage those images (build, test, store, update, delete).  So if you deploy all your infra automatically and you deploy your software and it&rsquo;s configuration automatically then you can run some code and in a little while you have an instance of your whole software application running.  The benefits are many, but they include:</p>

<ul>
<li>repeatability - you get exactly the same setup every time you run the code</li>
<li>source control - put that code under source control (like git) and manage it like code</li>
<li>inspectability - unlike GUI operations, you can have a second set of eyes review it</li>
<li>sharability - you can share the code between teams, building on others successes</li>
<li>recoverability - you can rebuild identical infra somewhere else if a catastrophe happens</li>
</ul>

<p>You need a good Disaster Recovery (DR) plan anyway, and if you are this point then you can put something in place that actually works.  You can choose to use the cloud provider&rsquo;s proprietary solution or use something open source, but the point is just to DO IT.  I highly recommend <a href="https://www.terraform.io/">terraform</a> for this though. While your scripts do end up being specific to the cloud vendor, but at least it&rsquo;s readable code.  I draw distinction here between cloud infra orchestration systems (like terraform or AWS Cloud Formation or Azure Resource Manager) and Configuration Management solutions like chef, puppet or ansible.  If you are not already familiar with all these I recommend you stop now and <a href="https://www.thorntech.com/2018/04/15-infrastructure-as-code-tools/">go read up on them</a>.</p>

<p>A typical scenario uses terraform to create the infra and then either chef, puppet, ansible or salt to deploy and configure the software. The details on what is installed on a given host is usually specified as part of the cloud init process.  This is somewhat specific to the cloud vendor.  AWS does it <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html">this way</a> and Azure does it a<a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/cloudinit-bash-script"> similar way</a>.  Terraform abstracts that away to be mostly common but you should really <a href="http://darylscorner.com/2016/11/using-terraform-across-multiple-cloud-providers/">learn how</a>.  And there are gotchas, according to <a href="https://dzone.com/articles/multi-cloud-gotchas-with-aws-azure-and-hashicorp">some</a>.  The point is that you should avoid creating custom VM images because managing them becomes massively painful, and when you need to use them you are copying or moving hundreds of gigabyte images over the cloud network.  Nothing happens fast that way.  If you use terraform to boot a standard image and pass in the right cloud init data to trigger your configuration management then you can automatically deploy everything.</p>

<p>I cannot emphasize this enough.  Deployment automation is the first and most important part of doing real cloud.  You will be tempted to get close to full automation and some small part of another will be difficult and you will think &ldquo;that&rsquo;s OK, I&rsquo;ll just do that part manually.&rdquo;  Don&rsquo;t do it.  Don&rsquo;t let that little devil on your shoulder tempt you that way.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/devil-on-shoulder.jpg" width="100%" /></p>

<p>Finish the job. Be able to deploy your whole solution by running a script. If your solution deploys it&rsquo;s own database then you also have to run the scripts to at least create your schemas, or to recover a database backup that has a known set of data or a recent backup of your data.  This is the holy grail:  to be able to deploy your whole software solution to the cloud by running a script and passing it some data (like which database backup to use, for example).  When you get to this point, you can celebrate.  You have hit a milestone in Cloudy DevOps.</p>

<p>But you are not done.  Even more important than the code to create and deploy the infrastructure and software is the code to DELETE the infrastructure.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/disposal-automation.png" width="100%" /></p>

<p>The important concept here is DISPOSABILITY.  If you can create it from code, you can delete it from code.  Poof!  It&rsquo;s gone.  This should be part and parcel of what you did to test your creation scripts.  Create.  Test and verify.  Destroy.  Repeat and ensure it&rsquo;s the same, every time.</p>

<p>The ability to destroy the resources is even more important than the ability to create it.  Stop for a minute and think.  Why is that more important?  There&rsquo;s two big reasons.  The smaller reason is money.  I&rsquo;ve seen teams create lots and lots of infrastructure and then not turn it off and the next thing you know you are spending $300K per quarter and the finance people get really unhappy.  Build the discipline to create and then destroy it after you&rsquo;ve used it.  But the bigger reason is the workflow that gets enabled out of dynamic creation and destruction of infrastructure.</p>

<p>This changes everything.  You now completely decouple Engineers working on one part of your solution from dependencies on Engineers working on other parts.  Team A can deploy version 1 with some changes they are working on and they can develop and test to their hearts content - and then destroy the whole thing a few hours later.  For less money than a few pizzas cost your team can make huge progress on things that previously dependent on other teams.  Not only that, your testing/QA efforts can proceed independently.  Want to do regression testing against a specific version of code and a specific version of your database?  Deploy that combination and test, and turn it all off by dinner.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/pizzas.jpg" width="100%" /></p>

<p>Seriously.  This is the single most important step you can take.  Well, other than actually having automated tests.  You do have those right?  That&rsquo;s just good software practice and not specific to Cloudy DevOps, but you do need it to really make the next step sing. If you can automatically instantiate cloud servers and deploy and configure your software, and you can automatically run tests against it, then you have the logo blocks you need to start the next stage of the cloud journey.  You can start to think about Continuous Integration and Continuous Delivery (CI/CD).  You have the blocks in place to really start taking your software apart and breaking it into components, reworking it towards micro-services.  You can really start thinking about containers (if you didn&rsquo;t already start there up above).</p>

<p>Create, test, destroy.  Sounds almost biblical.  But it&rsquo;s the foundation for Cloudy DevOps. It&rsquo;s not easy to get there if your starting point is old-school Enterprise software development.  But you don&rsquo;t need to boil the ocean.  You can make incremental progress.  It reminds me of the admittedly apocryphal story of what Michelangelo said when he was asked how he sculpted his famous statue David.  He supposedly said &ldquo;well, I carved away everything that didn&rsquo;t look like David.&rdquo;  You can do the same thing with DevOps.  Stop doing all the things that don&rsquo;t look like DevOps.</p>

<p><img src="https://gherlein.github.io/images/cloud-images/david.png" width="100%" /></p>

<p>Next up:  talking about Ops and how your mind-set needs to change to start to really make DevOps work for you.  Stay tuned!</p>
  
  <h4><i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fgherlein.github.io%2fpost%2fcloud-basics%2f" target="_blank" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://twitter.com/intent/tweet?source=https%3a%2f%2fgherlein.github.io%2fpost%2fcloud-basics%2f&via=HorribleGeek" target="_blank" title="Tweet"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://plus.google.com/share?url=https%3a%2f%2fgherlein.github.io%2fpost%2fcloud-basics%2f" target="_blank" title="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span class="sr-only">Share on Google+</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.tumblr.com/share?v=3&u=https%3a%2f%2fgherlein.github.io%2fpost%2fcloud-basics%2f" target="_blank" title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden="true"></i><span class="sr-only">Post to Tumblr</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fgherlein.github.io%2fpost%2fcloud-basics%2f" target="_blank" title="Pin it"><i class="fab fa-pinterest-p" aria-hidden="true"></i><span class="sr-only">Pin it</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.reddit.com/submit?url=https%3a%2f%2fgherlein.github.io%2fpost%2fcloud-basics%2f" target="_blank" title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden="true"></i><span class="sr-only">Submit to Reddit</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://gherlein.github.io/post/self-driving-revolution/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://gherlein.github.io/post/self-driving-revolution/">Self Driving Revolution</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://gherlein.github.io/post/blowing-up-monolith/">Review:  Blowing up the Monolith</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://gherlein.github.io/post/blowing-up-monolith/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://gherlein.github.io/js/ui.js"></script>
<script src="https://gherlein.github.io/js/menus.js"></script>






<script src="https://gherlein.github.io/js/math-code.js"></script>
  <script async src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


</body>
</html>

