<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.123.7">

  <title>Using Claude Code to Build gocat &middot; Greg Herlein</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://blog.herlein.com/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://blog.herlein.com/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://blog.herlein.com/css/blackburn.css">

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" type="text/css">

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css">
  <script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://blog.herlein.com/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://blog.herlein.com/">Herlein</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.herlein.com/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.herlein.com/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.herlein.com/about/"><i class='fa fa-user fa-fw'></i>About Me</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.herlein.com/projects/"><i class='fa fa-user fa-fw'></i>Projects</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.herlein.com/resume/"><i class='fa fa-user fa-fw'></i>Resume</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://blog.herlein.com/staffing/"><i class='fa fa-user fa-fw'></i>Staffing</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2018-2026. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Using Claude Code to Build gocat</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>28 Nov 2025, 00:00</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://blog.herlein.com/tags/technical">technical</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://blog.herlein.com/tags/ai">ai</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://blog.herlein.com/tags/go">go</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://blog.herlein.com/tags/claude">claude</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://blog.herlein.com/tags/agentic-coding">agentic coding</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://blog.herlein.com/tags/rf">rf</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://blog.herlein.com/tags/hardware">hardware</a>
    
  </div>
  
  

</div>

  <p>In my <a href="https://blog.herlein.com/post/claude-code/">previous post about Claude Code</a>, I talked about using VS Code devcontainers to safely run Claude in &ldquo;dangerous mode.&rdquo; That was great for a typical software project. But what about something harder? What about porting a complex hardware-interfacing library from Python to Go, where you need to deeply understand USB protocols, radio registers, and firmware internals?</p>
<p>That&rsquo;s exactly what I did with <a href="https://github.com/gherlein/gocat">gocat</a> – a Go library for controlling the YardStick One sub-GHz RF transceiver. And Claude Code was instrumental in making it happen.</p>
<h2 id="the-challenge-porting-rfcat-to-go">The Challenge: Porting RFCat to Go</h2>
<p>The <a href="https://greatscottgadgets.com/yardstickone/">YardStick One</a> (YS1) is a fantastic piece of hardware for RF research. It&rsquo;s based on a CC1111 radio transceiver that can transmit and receive on frequencies from 300-928 MHz. The existing tooling is <a href="https://github.com/atlas0fd00m/rfcat">RFCat</a>, a Python library that&rsquo;s been around for years and works well.</p>
<p>But Python has its limitations for production deployments. Managing Python environments across systems is a pain. The GIL limits concurrency. And shipping a Python application means shipping a runtime. Go, on the other hand, compiles to a single static binary. No dependencies. No virtualenvs. Just run it.</p>
<p>The problem? Porting RFCat to Go meant understanding:</p>
<ul>
<li>The USB protocol between host and device</li>
<li>The CC1111 radio register configuration</li>
<li>TX/RX state machine transitions</li>
<li>The RFCat firmware internals</li>
</ul>
<p>This isn&rsquo;t a &ldquo;read the API docs and write some wrapper code&rdquo; kind of project. This is reverse engineering.</p>
<h2 id="a-safe-space-for-dangerous-work">A Safe Space for Dangerous Work</h2>
<p>After my experience with devcontainers, I knew I wanted something more flexible for hardware work. The YardStick One needs USB access, which means device passthrough. And I wanted to be able to reference the original RFCat Python code while writing the Go replacement – but I definitely didn&rsquo;t want Claude accidentally modifying that code.</p>
<p>Enter <a href="https://github.com/gherlein/localdev">localdev</a>.</p>
<p>localdev is a Podman container setup I built specifically for this kind of work. The key insight: <strong>mount directories with different permissions for different purposes</strong>.</p>
<p>Here&rsquo;s what my gocat development environment looked like:</p>
<pre tabindex="0"><code>Container Filesystem
├── /gocat/                 # My project (read-write)
├── /claude/                # Global Claude config (read-write)
└── /external/
    └── rfcat/              # Original RFCat source (READ-ONLY!)
</code></pre><p>The rfcat folder was mounted read-only. Claude could read every line of Python code, every C firmware source file, every protocol comment. But it couldn&rsquo;t change a single byte. If Claude went nuts and tried to &ldquo;improve&rdquo; the original code, the mount permissions would just say no.</p>
<p>This is the beauty of container isolation done right. You&rsquo;re not just limiting what directories Claude can see – you&rsquo;re controlling what it can <em>do</em> with them. Read-only mounts for reference material. Read-write for your actual work. And the container boundary keeps everything else safe.</p>
<h2 id="building-understanding-before-building-code">Building Understanding Before Building Code</h2>
<p>Here&rsquo;s where my approach differed from typical &ldquo;vibe coding.&rdquo; I didn&rsquo;t just point Claude at the RFCat source and say &ldquo;port this to Go.&rdquo; That would have been a disaster. Instead, we started with documentation.</p>
<h3 id="deep-diving-the-datasheets">Deep Diving the Datasheets</h3>
<p>The first step was understanding the hardware itself. The CC1111 is a complex chip – it&rsquo;s got an 8051 microcontroller core, a full RF transceiver, USB 2.0 support, and dozens of configuration registers. Texas Instruments publishes a <a href="https://www.ti.com/lit/ds/symlink/cc1111.pdf">comprehensive datasheet</a>, but it&rsquo;s 280+ pages of dense technical material.</p>
<p>Claude and I worked through it together. We documented the key register addresses, the configuration formulas, the state machine behavior. We built up <code>docs/cc1110-cc1111.md</code> with a quick reference:</p>
<ul>
<li>Device specifications (frequency bands, data rates, power levels)</li>
<li>Register overview (SYNC1/0, FREQ2/1/0, MDMCFG, PA_TABLE&hellip;)</li>
<li>Command strobes (SFSTXON, SCAL, SRX, STX, SIDLE)</li>
<li>Configuration formulas for frequency, data rate, channel bandwidth</li>
</ul>
<h3 id="reverse-engineering-the-usb-protocol">Reverse Engineering the USB Protocol</h3>
<p>Next came the USB protocol. RFCat uses bulk transfers on Endpoint 5 for the primary command/response protocol. The format isn&rsquo;t documented anywhere except in the source code comments and the implementation itself.</p>
<p>Claude read through <code>rflib/chipcon_usb.py</code> and <code>rflib/chipcon_nic.py</code> while I asked questions. We documented everything in <code>docs/rfcat-packet-format.md</code>:</p>
<ul>
<li>Packet structure (app ID, command byte, length, payload)</li>
<li>Response format (the &lsquo;@&rsquo; marker, echoed app/cmd, response data)</li>
<li>Application IDs (APP_SYSTEM for admin commands, APP_NIC for radio operations)</li>
<li>Every command and its payload format</li>
</ul>
<p>This document ended up being over 900 lines. It&rsquo;s essentially a complete protocol specification reverse-engineered from the source.</p>
<h3 id="understanding-txrx-state-machines">Understanding TX/RX State Machines</h3>
<p>The trickiest part was understanding how transmit and receive actually work. The CC1111 has a state machine (MARCSTATE) that transitions between IDLE, RX, TX, and various calibration states. Getting the sequencing wrong means packets don&rsquo;t go out, or received data gets corrupted, or the radio just hangs.</p>
<p>We built <code>docs/recv-and-xmit.md</code> covering:</p>
<ul>
<li>Prerequisites for RF operations</li>
<li>Step-by-step receive mode configuration</li>
<li>Step-by-step transmit mode configuration</li>
<li>The firmware&rsquo;s interrupt-driven receive process</li>
<li>Error handling and recovery</li>
</ul>
<h3 id="usb-from-go">USB from Go</h3>
<p>Since this was a Go project, we also documented how USB device access works with the <code>gousb</code> library. Control transfers, bulk transfers, endpoint handling, error conditions. This became <code>docs/usb-from-go.md</code>.</p>
<h3 id="default-configuration-analysis">Default Configuration Analysis</h3>
<p>Finally, we documented all the default register values that RFCat uses. What frequency? What modulation? What data rate? What sync word? All captured in <code>docs/defaults-in-rfcat.md</code> with detailed breakdowns of every register field.</p>
<h2 id="then-we-started-coding">Then We Started Coding</h2>
<p>Only after we had comprehensive documentation did we start writing Go code. And at this point, the coding was almost mechanical. We knew exactly what USB commands to send. We knew exactly what register values to write. We knew what responses to expect.</p>
<p>The implementation happened incrementally:</p>
<ol>
<li><strong>USB device enumeration</strong> – find and open YardStick One devices</li>
<li><strong>Basic protocol</strong> – send commands, receive responses, handle the &lsquo;@&rsquo; packet framing</li>
<li><strong>Register access</strong> – peek/poke memory, read/write radio configuration</li>
<li><strong>Radio mode control</strong> – transitions between IDLE, RX, TX states</li>
<li><strong>Configuration management</strong> – load settings from JSON files</li>
<li><strong>Packet operations</strong> – actually transmit and receive RF data</li>
<li><strong>YS1 amplifier control</strong> – enable the front-end amps for better range</li>
</ol>
<p>Each piece built on the documentation we&rsquo;d already created. When something didn&rsquo;t work, we could go back to the docs, compare against the RFCat behavior, and figure out what we&rsquo;d missed.</p>
<h2 id="the-payoff-real-rf-communication">The Payoff: Real RF Communication</h2>
<p>The final validation came with the <code>test-10-repeat</code> tool. With two YardStick One devices connected, it runs a reliability test – sending packets at increasing speeds and measuring how many get through.</p>
<p>Here&rsquo;s an actual test run:</p>
<pre tabindex="0"><code>========================================
SUMMARY
========================================
Delay           Sent     Recv     Success%   Avg RSSI
------------------------------------------------------------
1s              10       10       100.0      -139
500ms           10       10       100.0      -140
250ms           10       10       100.0      -137
125ms           10       10       100.0      -139
62.5ms          10       10       100.0      -140
31.25ms         10       10       100.0      -138
15.625ms        10       10       100.0      -140
</code></pre><p>100% packet success rate at 64 packets per second. The Go implementation works. It&rsquo;s not a toy – it&rsquo;s actually communicating over RF, using the same firmware and protocol as RFCat, but from native Go code.</p>
<h2 id="what-made-this-work">What Made This Work</h2>
<p>Looking back, several things made this project successful:</p>
<p><strong>Documentation First</strong>: We didn&rsquo;t try to port code line-by-line. We extracted <em>understanding</em> from the original codebase and captured it in documentation. This made the actual implementation much cleaner because we could design for Go idioms instead of translating Python patterns.</p>
<p><strong>Read-Only Source Reference</strong>: Having the RFCat source available read-only meant Claude could always go check &ldquo;how does the original handle this?&rdquo; without any risk of contaminating that reference material.</p>
<p><strong>Container Isolation with USB Passthrough</strong>: localdev&rsquo;s Podman setup includes USB device passthrough (<code>--device /dev/bus/usb</code>). So we got full isolation for file operations while still being able to talk to actual hardware.</p>
<p><strong>Incremental Building and Testing</strong>: We built tools along the way to validate each piece. <code>lsys1</code> to list devices. <code>ys1-dump-config</code> to read current settings. <code>send-recv</code> for basic TX/RX. Each tool proved that the underlying library code worked before we built on top of it.</p>
<p><strong>Claude&rsquo;s Pattern Recognition</strong>: Honestly, Claude is really good at seeing patterns in code. It could look at the Python RFCat implementation and understand not just <em>what</em> it did but <em>why</em>. That made the translation to Go much more than a mechanical exercise.</p>
<h2 id="conclusion">Conclusion</h2>
<p>This project convinced me that Claude Code is genuinely useful for porting work – not just writing new code, but understanding existing codebases and reimplementing them in different languages.</p>
<p>The key is preparation. You can&rsquo;t just throw Claude at a complex codebase and expect miracles. But if you set up a safe environment with appropriate permissions, take the time to build documentation, and work incrementally&hellip; you can accomplish a lot.</p>
<p>gocat isn&rsquo;t done. It&rsquo;s still experimental, missing features, needs more testing. But the core works. Two YardStick Ones can talk to each other through Go code, using the same RF protocol as the battle-tested Python original.</p>
<p>That&rsquo;s not bad for an AI-assisted porting project.</p>
<p>If you want to try it yourself, both <a href="https://github.com/gherlein/gocat">gocat</a> and <a href="https://github.com/gherlein/localdev">localdev</a> are available on GitHub. And if you&rsquo;re doing hardware work with Claude Code, I strongly recommend the container isolation approach. Let Claude run wild – just make sure &ldquo;wild&rdquo; is a very carefully bounded sandbox.</p>
  
  <h4><i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.herlein.com%2fpost%2fclaude-code-gocat%2f" target="_blank" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://twitter.com/intent/tweet?source=https%3a%2f%2fblog.herlein.com%2fpost%2fclaude-code-gocat%2f" target="_blank" title="Tweet"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://plus.google.com/share?url=https%3a%2f%2fblog.herlein.com%2fpost%2fclaude-code-gocat%2f" target="_blank" title="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span class="sr-only">Share on Google+</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.tumblr.com/share?v=3&u=https%3a%2f%2fblog.herlein.com%2fpost%2fclaude-code-gocat%2f" target="_blank" title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden="true"></i><span class="sr-only">Post to Tumblr</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fblog.herlein.com%2fpost%2fclaude-code-gocat%2f" target="_blank" title="Pin it"><i class="fab fa-pinterest-p" aria-hidden="true"></i><span class="sr-only">Pin it</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.reddit.com/submit?url=https%3a%2f%2fblog.herlein.com%2fpost%2fclaude-code-gocat%2f" target="_blank" title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden="true"></i><span class="sr-only">Submit to Reddit</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://blog.herlein.com/post/claude-code/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://blog.herlein.com/post/claude-code/">From Clicking Yes to Letting Claude Run Wild (Safely)</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
  </div>
</div>


  
  
  
  

  

</div>

</div>
</div>
<script src="https://blog.herlein.com/js/ui.js"></script>
<script src="https://blog.herlein.com/js/menus.js"></script>










</body>
</html>

